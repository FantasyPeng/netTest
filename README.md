# netTest
使用node.js实现的下载文件应用

## 要求
- 掌握利用Socket进行编程的技术
- 要求客户端可以罗列服务器文件列表，选择一个进行下载
- 对文件进行分割（每片256字节），分别打包传输
  - 发送前，通过协商，发送端告诉接收端发送片数
  - 报头为学号、姓名、本次分片在整个文件中的位置
  - 报尾为校验和：校验和s的计算：设要发送n字节，bi为第i个字，s=(b0+b1+…+bn) mod 256
- 接收方进行合并
- 必须采用图形界面
  - 发送端可以选择文件，本次片数
  - 接收端显示总共的片数，目前已经接收到的文件片数，收完提示完全收到

## 说明
- server.js为服务端，负责读取文件内容，并进行分片和添加协议报文，再发送给客户端
- client.js为TCP通信的客户端，同时也是WebSocket的服务端
  - 负责接收来自网页前端的要求，即要下载的文件和本次下载片数
  - 向server.js服务端发送请求，再接收server.js服务端回发的报文
  - 将回发的报文解析，提取出每一片中的有效信息，并进行合并
  - 将合并后的数据回发给WebSocket的前端，即网页端
- scripts/layout.js为WebSocket的客户端
  - 获取网页端的信息，通过WebSocket发送给client.js
  - 接收来自后端的文件列表信息，将其显示到前端
  - 接收文件数据，并使用blob创建文件并下载

## 运行流程
- ```node server.js```
- ```node client.js```
- 打开Index.html
- 选择要下载的文件和片数


## 主要技术
- node.js的tcp编程技术
- jQuery
- WebSocket ws作为前后端通信技术
- Base64编码
- Blob

## 注意
- 前端初学者，初次接触node.js，技术弱鸡，欢迎指正不当之处
- database为你想要下载的文件的库，我们假设它是一个数据库，将文件放入即可实现浏览器下载
- 如你的文件包含中文或其它非ASII字符，务必使用utf-8编码格式编码你的文件
- 太大的文件传输会出问题。。。。